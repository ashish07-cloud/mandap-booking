{% extends "base.html" %}

{% block title %}Available Halls - Mandap{% endblock %}

{% block content %}
<div class="relative py-16 bg-gradient-to-b from-[var(--saffron)]/20 to-white">
  <!-- Floating Mandala Accents -->
  <div class="absolute inset-0 pointer-events-none">
    <div class="mandala-icon absolute top-10 left-8 animate-float-gentle opacity-20"></div>
    <div class="mandala-icon absolute bottom-10 right-12 animate-mandala-rotate opacity-15"></div>
  </div>

  <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Hero Header -->
    <div class="text-center mb-16">
      <h1 class="text-4xl md:text-5xl font-bold logo-text mb-4">
        Exquisite Wedding Venues
      </h1>
      <p class="text-lg text-gray-700 max-w-2xl mx-auto">
        Discover the perfect venue for your special day among our curated selection.
      </p>
    </div>

    <!-- Search/Filters Section -->
    <form method="get" class="mb-12">
      <div class="bg-white bg-opacity-90 backdrop-blur-sm rounded-2xl shadow-xl p-6 border border-[var(--gold)]">
        <div class="flex flex-col md:flex-row md:items-center gap-4">
          <div class="flex-1 relative">
            <input type="text" name="search" id="search" value="{{ search }}" placeholder="Search by location or hall name" class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-full focus:outline-none focus:ring-[var(--deep-red)] focus:border-[var(--deep-red)]" />
            <svg class="w-5 h-5 text-gray-400 absolute left-3 top-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817" />
            </svg>
          </div>
          <div class="flex items-center space-x-4">
            <div>
              <label for="price" class="sr-only">Price Range</label>
              <select id="price" name="price" class="pl-3 pr-10 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-[var(--deep-red)] focus:border-[var(--deep-red)]">
                <option {% if price == 'All Prices' %}selected{% endif %}>All Prices</option>
                <option {% if price == 'Under ₹50,000' %}selected{% endif %}>Under ₹50,000</option>
                <option {% if price == '₹50,000 - ₹1,00,000' %}selected{% endif %}>₹50,000 - ₹1,00,000</option>
                <option {% if price == 'Over ₹1,00,000' %}selected{% endif %}>Over ₹1,00,000</option>
              </select>
            </div>
            <button type="submit" class="mandap-btn px-6 py-3 rounded-full font-medium">
              Apply Filters
            </button>
          </div>
        </div>
      </div>
    </form>

    <!-- Halls Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {% for hall in halls %}
      <div class="group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-transform transform hover:-translate-y-1">
        <div class="relative h-64">
          {% if hall.image %}
          <img src="{{ hall.image.url }}" alt="{{ hall.name }}" class="w-full h-full object-cover group-hover:scale-105 transition duration-500" />
          {% else %}
          <div class="w-full h-full bg-gray-100 flex items-center justify-center">
            <span class="text-gray-400">No Image</span>
          </div>
          {% endif %}
          <span class="absolute top-4 right-4 bg-[var(--gold)] text-[var(--royal-blue)] px-3 py-1 rounded-full font-semibold">
            ₹{{ hall.price }}
          </span>
        </div>
        <div class="p-6">
          <h3 class="text-xl font-bold text-[var(--deep-red)] mb-1">
            <a href="{% url 'booking:hall_detail' hall.id %}">{{ hall.name }}</a>
          </h3>
          <p class="text-sm text-gray-600 flex items-center mb-3">
            <svg class="w-4 h-4 mr-1 text-[var(--royal-blue)]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2a7 7 0 017 7c0 4-7 13-7 13S5 13 5 9a7 7 0 017-7z" />
            </svg>
            {{ hall.location }}
          </p>
          <p class="text-gray-700 mb-4 line-clamp-2">
            {{ hall.description|default:"A beautiful venue with premium amenities." }}
          </p>
          <div class="flex justify-between items-center">
            <span class="text-sm text-gray-600 flex items-center">
              <svg class="w-4 h-4 mr-1 text-[var(--saffron)]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7h18v14H3V7zM7 3h10v4H7V3z" />
              </svg>
              {{ hall.capacity }} guests
            </span>
            <a href="{% url 'booking:hall_detail' hall.id %}" class="inline-flex items-center px-5 py-2 bg-gradient-to-r from-[var(--deep-red)] to-[var(--saffron)] text-white font-medium rounded-full shadow hover:opacity-90 transition-opacity">
              View Details
              <svg class="w-4 h-4 ml-2 transform group-hover:translate-x-1 transition-transform" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
              </svg>
            </a>
          </div>
        </div>
      </div>
      {% empty %}
      <div class="col-span-full text-center py-12 text-gray-600">
        <p class="text-lg">No halls available</p>
        <button onclick="location.href='?';" class="mt-4 text-[var(--deep-red)] font-medium underline">
          Clear all filters
        </button>
      </div>
      {% endfor %}
    </div>

    

    <!-- Pagination -->
    {% if halls.has_other_pages %}
    <div class="mt-12 flex justify-center">
      <nav class="inline-flex rounded-md shadow-sm">
        {% if halls.has_previous %}
        <a href="?page={{ halls.previous_page_number }}" class="px-3 py-2 rounded-l-md border border-gray-300 bg-white hover:bg-gray-50">
          ‹
        </a>
        {% endif %}
        {% for i in halls.paginator.page_range %}
        <a href="?page={{ i }}" class="px-4 py-2 border-t border-b {% if halls.number == i %}border-[var(--deep-red)] bg-[var(--deep-red)]/10 text-[var(--deep-red)]{% else %}border-gray-300 bg-white text-gray-500 hover:bg-gray-50{% endif %}">
          {{ i }}
        </a>
        {% endfor %}
        {% if halls.has_next %}
        <a href="?page={{ halls.next_page_number }}" class="px-3 py-2 rounded-r-md border border-gray-300 bg-white hover:bg-gray-50">
          ›
        </a>
        {% endif %}
      </nav>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}